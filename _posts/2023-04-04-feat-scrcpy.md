---
layout: post
title: 안드로이드 무선 디버깅 (feat. scrcpy)
date: '2023-04-04T15:47:00.001+09:00'
author: MJ
tags: [scrcpy]
modified_time: '2023-04-04T15:47:06.821+09:00'
---
 앱을 개발할때 에뮬레이터가 아닌 실제 디바이스에서 디버깅과 같이 테스트해야 할 상황이 있다.

보통은 스마트폰을 컴퓨터와 유선으로 연결하여 앱을 개발한다.

유선으로 개발할때 핸드폰으로 전화가 오거나 컴퓨터와 연결된 선을 제거하고 움직여야 할때 다시돌아와서는 다시 선을 연결하고 작업을 진행했다.

위와 같이 컴퓨터와 연결된 선을 뺏다 꼇다 하는식으로가 아닌, 무선 공유기와 같이 스마트폰과 컴퓨터가 같은 네트워크상에 연결되어있다면, 무선으로 디버깅이 가능하게 해주는 도구가 있고 실제로 앱을 개발할때 사용을 하고있어서 기록으로 남길려고한다.

  

안드로이드 공식 문서에 [무선 디버깅](https://developer.android.com/studio/command-line/adb?hl=ko) 관련 자료는 링크로 첨부한다.

  

무선으로 안드로이드 스마트폰 디버깅 스마트폰의 화면 미러링 기능을 이용해서 안드로이드 앱을 개발 하고 있다.

  

먼저 필요한것은 [scrcpy](https://developer.android.com/studio/command-line/adb?hl=ko) 라는 도구를 설치해야 한다.

자세한 설치방법은 위에 참조한 링크를 참고하여 설치하면 된다.

scrcpy는 안드로이드 디바이스 미러링기능을 USB선 혹은 TCP/IP(무선)으로 키보드, 마우스를 이용하여 제어 할수 있도록 하는 어플리케이션이다.

![](/assets/images/2023/04/04/1.png)

scrcpy 설명

  
  
위와 같이 scrcpy를 설치하고 난후에 스마트폰과, 노트북을 같은 공유기에 와이파이 연결을 한다.(같은 네트워크에 존재해야한다.)

  

처음에 무선 디버깅 환경을 위해서는 반드시 유선으로 한번 연결을 한후에 무선 디버깅 설정을 하고 그다음 연결된 선을 제거하고 나서부터는 무선으로 디버깅이 가능하다.

이런 번거로움이 있지만 한번만 연결하면 스마트폰이 선에 묶여있지 않고 자유롭게 사용가능하며 컴퓨터로 스마트폰을 컨트롤 할수 있어 여러모로 편리하다.

  

일러두지만 현재 내가 사용하고있는 컴퓨터는 맥북이여서 macOS 기준으로 설명 한다.

  

0. 컴퓨터와 스마트폰을 같은 무선네트워크에 연결한다.(동일한 와이파이 접속)

1. 컴퓨터와 스마트폰을 유선으로 연결한다.(USB선 연결)

2. 스마트폰의 ip를 알아낸다.

    1. 먼저 스마트폰의 와이파이에 연결된 ip를 알아야한다.

        ```adb shell ip address show wlan0``` 를 입력하면

        스마트폰의 ip 정보를 알아낼수있다.

        아래 첨부된 이미지에는 192.168.219.109가 스마트폰의 ip다.  

![](/assets/images/2023/04/04/2.png)
  

3. 스마트폰의 무선 디버깅기능을 활성화 한다.

    1. ```adb tcpip 5555``` 명령어를 입력하여 스마트폰에서 tcpip 5555번 포트로 무선 디버깅이 가능하도록 한다.

![adb tcpip 5555](/assets/images/2023/04/04/3.png)

![](/assets/images/2023/04/04/4.png)

```adb --help``` 로 확인한 tcpip 옵션 설명

4. 스마트폰과 무선 연결한다.

    1. 터미널에 adb connect 명령을 이용하여 스마트폰과 컴퓨터를 무선 연결한다.

        - adb connect \[스마트폰IP\]:\[활성시킨PORT번호\] 명령어 입력

![](/assets/images/2023/04/04/5.png)
```adb connect [스마트폰IP]:[활성포트번호]```


![](/assets/images/2023/04/04/6.png)
```adb --help``` 로 확인한 connect 옵션 설명

  
5. 스마트폰과 컴퓨터의 유선연결을 해제한다.

6. scrcpy 도구를 이용하여 컴퓨터로 스마트폰을 미러링한다.

    1. 터미널에 ```scrcpy --select-tcpip``` 를 입력한다.

    tip: ```scrcpy --select-tcpip &``` 을 입력하면 백그라운드 모드로 동작.

    2. 화면에 출력된 스마트폰 화면을 확인한다.

![](/assets/images/2023/04/04/7.png)
scrcpy 명령어 후 화면에서 스마트폰 화면이 보인다.

vscode 개발 환경 기준 장치를 선택할때 그리고 adb로 연결된 장치를 확인할때 다음 사진과 같이 무선으로 연결된 스마트폰을 선택할 수 있다.

![](/assets/images/2023/04/04/8.png)
무선으로 연결된 장치를 선택할 수 있으며 실제 adb 연결된 장치 목록에도 나온다.